'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.AUmainNavContent=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _typeof=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _animate=require('@gov.au/animate');var _animate2=_interopRequireDefault(_animate);var _linkList=require('@gov.au/link-list');var _linkList2=_interopRequireDefault(_linkList);require('../css/styles.css');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}/*! @gov.au/main-nav v1.0.3 *//***************************************************************************************************************************************************************
 *
 * mainNav function
 *
 * Horizontal list of links to key areas on the website. Usually located in the header.
 *
 **************************************************************************************************************************************************************/// interdependency with our animate lib
// ES6 dependency: import AUlinkList from './link-list';
// The following line will be replaced automatically with generic imports for the ES5 pipeline.
// You can safely ignore this bit if you use this module with pancake
//
/**
 * A menu inside the AUmainNav
 *
 * @param  {array}  items            - The links in an array containing text, location and active status
 * @param  {string} linkComponent    - The component used for the link
 */var AUmainNavMenu=function AUmainNavMenu(_ref){var items=_ref.items,linkComponent=_ref.linkComponent;// Generate the menu
var GenerateMenu=function GenerateMenu(items){var menu=items.map(function(item){var link=item.active?{link:item.link,text:item.text,'aria-current':'page',li:{className:'active'}}:{link:item.link,text:item.text};// return the link, maybe with children
return link});return menu};// Create the menu with children
return _react2.default.createElement(_linkList2.default,{items:GenerateMenu(items),linkComponent:linkComponent})};AUmainNavMenu.propTypes={items:_propTypes2.default.arrayOf(_propTypes2.default.shape({link:_propTypes2.default.string,text:_propTypes2.default.node.isRequired,children:_propTypes2.default.array})).isRequired,linkComponent:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.func])};AUmainNavMenu.defaultProps={linkComponent:'a'};// This value gets increased for each navigation component
var IDvalue=0;var AUmainNavContent=exports.AUmainNavContent=function(_React$PureComponent){_inherits(AUmainNavContent,_React$PureComponent);function AUmainNavContent(props){_classCallCheck(this,AUmainNavContent);var _this=_possibleConstructorReturn(this,(AUmainNavContent.__proto__||Object.getPrototypeOf(AUmainNavContent)).call(this,props));var items=props.items,_props$className=props.className,className=_props$className===undefined?'':_props$className,children=props.children,linkComponent=props.linkComponent,onOpen=props.onOpen,afterOpen=props.afterOpen,onClose=props.onClose,afterClose=props.afterClose,attributeOptions=_objectWithoutProperties(props,['items','className','children','linkComponent','onOpen','afterOpen','onClose','afterClose']);// Functions
_this.toggleClasses=_this.toggleClasses.bind(_this);_this.removeClass=_this.removeClass.bind(_this);_this.addClass=_this.addClass.bind(_this);_this.mainNavToggle=_this.mainNavToggle.bind(_this);_this.toggle=_this.toggle.bind(_this);_this.toggleAnimationState=function(){this.setState({animating:!this.state.animating})}.bind(_this);// Event listeners
_this.auFocusTrapListenerTop=_this.auFocusTrapListenerTop.bind(_this);_this.auFocusTrapListenerBottom=_this.auFocusTrapListenerBottom.bind(_this);_this.auKeyListener=_this.auKeyListener.bind(_this);// Variables
_this.state={closed:true,animating:false};// Increase the ID so it's unique for each instance
IDvalue+=1;_this.id='au-main-nav-'+IDvalue;return _this}/**
	 * Toggle an main navigation on click
	 *
	 * @param  {event object} event - The event object of the click
	 */_createClass(AUmainNavContent,[{key:'toggle',value:function toggle(event){event.preventDefault();// If the main menu is animating don't change toggle the menu
if(this.state.animating){return}// Toggle the menu's current state
this.setState({closed:!this.state.closed,animating:true})}/**
	 * componentDidUpdate - Update the component when it changes
	 *
	 * @param {*} prevProps - The previous property values
	 * @param {*} prevState - The previous state values
	 */},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState){if(prevState!==undefined&&this.state!==undefined&&this.state.closed!==prevState.closed){this.mainNavToggle(this.mainNavContent,this.props.speed,{onOpen:this.props.onOpen,afterOpen:this.props.afterOpen,onClose:this.props.onClose,afterClose:this.props.afterClose})}}/**
	 * IE8 compatible function for replacing classes on a DOM node
	 *
	 * @param  {object} element       - The DOM element we want to toggle classes on
	 * @param  {string} openingClass  - The firstClass you want to toggle on the DOM node
	 * @param  {string} closingClass  - The secondClass you want to toggle on the DOM node
	 */},{key:'toggleClasses',value:function toggleClasses(element,state,openingClass,closingClass){if(state==='opening'||state==='open'){var oldClass=openingClass||'au-main-nav__content--closed';var newClass=closingClass||'au-main-nav__content--open'}else{var oldClass=closingClass||'au-main-nav__content--open';var newClass=openingClass||'au-main-nav__content--closed'}this.removeClass(element,oldClass);this.addClass(element,newClass)}/**
	 * IE8 compatible function for removing a class
	 *
	 * @param  {object} element   - The DOM element we want to manipulate
	 * @param  {object} className - The name of the class to be removed
	 */},{key:'removeClass',value:function removeClass(element,className){if(element.classList){element.classList.remove(className)}else{element.className=element.className.replace(new RegExp('(^|\\b)'+className.split(' ').join('|')+'(\\b|$)','gi'),' ')}}/**
	 * IE8 compatible function for adding a class
	 *
	 * @param  {object} element   - The DOM element we want to manipulate
	 * @param  {object} className - The name of the class to be added
	 */},{key:'addClass',value:function addClass(element,className){if(element.classList){element.classList.add(className)}else{element.className=element.className+' '+className}}/**
	 * auFocusTrapListenerTop - What happens when the focus trap top gets focus
	 *
	 * @param {event} event - the event
	 */},{key:'auFocusTrapListenerTop',value:function auFocusTrapListenerTop(event){var focusContent=this.mainNavMenu.querySelectorAll('a, .au-main-nav__toggle');focusContent[focusContent.length-1].focus()}/**
	 * auFocusTrapListenerBottom - What happens when the focus trap bottom gets focus
	 *
	 * @param {event} event - the event
	 */},{key:'auFocusTrapListenerBottom',value:function auFocusTrapListenerBottom(event){var focusContent=this.mainNavMenu.querySelectorAll('a, .au-main-nav__toggle');focusContent[0].focus()}/**
	 * auKeyListener - What happens when a key gets pressed and the menu is open
	 *
	 * @param {event} event - the event
	 */},{key:'auKeyListener',value:function auKeyListener(event){// This should only close the menu when the menu is visibly open
var overlayOpen=window.getComputedStyle(this.mainNavOverlay).getPropertyValue('display');// Check the menu is open and visible and the escape key is pressed
if(event.keyCode===27&&overlayOpen==='block'){this.toggle(event)}}/**
	 * Toggle a mainNav element
	 *
	 * @param  {string}  element  - The toggle for the main nav
	 * @param  {integer} speed    - The speed in ms for the animation
	 *
	 */},{key:'mainNavToggle',value:function mainNavToggle(element,speed,callbacks){// stop event propagation
try{window.event.cancelBubble=true;event.stopPropagation()}catch(error){}// check this once
if((typeof callbacks==='undefined'?'undefined':_typeof(callbacks))!='object'){callbacks={}}// Elements we modify
var menu=this.mainNavMenu;var overlay=this.mainNavOverlay;var closeButton=element.querySelector('.au-main-nav__toggle--close');var openButton=element.querySelector('.au-main-nav__toggle--open');var focustrapTop=element.querySelector('.au-main-nav__focus-trap-top');var focustrapBottom=element.querySelector('.au-main-nav__focus-trap-bottom');var closed=!this.state.closed;var state=closed?'opening':'';var menuWidth=menu.offsetWidth;// Functions
var ToggleClasses=this.toggleClasses;var AUkeyListener=this.auKeyListener;var AUfocusTrapListenerTop=this.auFocusTrapListenerTop;var AUfocusTrapListenerBottom=this.auFocusTrapListenerBottom;var ToggleAnimationState=this.toggleAnimationState;overlay.style.display='block';(function(menu){_animate2.default.animate.Toggle({element:menu,property:'left',openSize:0,closeSize:-1*menuWidth,speed:speed||250,prefunction:function prefunction(){// Set these value immediately for transitions
if(state==='opening'){menu.style.display='block';overlay.style.left=0;overlay.style.opacity=0.5;// run when opening
if(typeof callbacks.onOpen==='function'){callbacks.onOpen()}}else{overlay.style.opacity='0';// run when closing
if(typeof callbacks.onClose==='function'){callbacks.onClose()}}},postfunction:function postfunction(){if(state==='opening'){// Move the focus to the close button
closeButton.focus();// Focus trap enabled
focustrapTop.setAttribute('tabindex',0);focustrapBottom.setAttribute('tabindex',0);focustrapTop.addEventListener('focus',AUfocusTrapListenerTop);focustrapBottom.addEventListener('focus',AUfocusTrapListenerBottom);// Add key listener
document.addEventListener('keyup',AUkeyListener);if(typeof callbacks.afterOpen==='function'){callbacks.afterOpen()}}else{// Move the focus back to the menu button
openButton.focus();// Remove the focus trap
focustrapTop.removeAttribute('tabindex');focustrapBottom.removeAttribute('tabindex');// Remove the event listeners
focustrapTop.removeEventListener('focus',AUfocusTrapListenerTop);focustrapBottom.removeEventListener('focus',AUfocusTrapListenerBottom);// Remove the event listener for the keypress
document.removeEventListener('keyup',AUkeyListener);if(typeof callbacks.afterClose==='function'){callbacks.afterClose()}}// Toggle classes
ToggleClasses(element,state);ToggleClasses(document.body,state,'au-main-nav__scroll--unlocked','au-main-nav__scroll--locked');// Reset inline styles
menu.style.display='';menu.style.left='';overlay.style.display='';overlay.style.left='';overlay.style.opacity='';// Toggle the animating state to false so that we can allow toggling again
ToggleAnimationState()}})})(menu)}},{key:'render',value:function render(){var _this2=this;return _react2.default.createElement('div',{id:this.id,className:'au-main-nav__content',ref:function ref(mainNavContent){_this2.mainNavContent=mainNavContent}},_react2.default.createElement('button',{'aria-controls':this.id,onClick:function onClick(event){return _this2.toggle(event)},className:'au-main-nav__toggle au-main-nav__toggle--open'},'Menu'),_react2.default.createElement('div',{className:'au-main-nav__menu',ref:function ref(mainNavMenu){_this2.mainNavMenu=mainNavMenu}},_react2.default.createElement('div',{className:'au-main-nav__menu-inner'},_react2.default.createElement('div',{className:'au-main-nav__focus-trap-top'}),_react2.default.createElement('button',{'aria-controls':this.id,onClick:function onClick(event){return _this2.toggle(event)},className:'au-main-nav__toggle au-main-nav__toggle--close'},'Close'),_react2.default.createElement(AUmainNavMenu,{linkComponent:this.props.linkComponent,items:this.props.items}),this.props.children,_react2.default.createElement('div',{className:'au-main-nav__focus-trap-bottom'}))),_react2.default.createElement('div',{'aria-controls':this.id,ref:function ref(mainNavOverlay){_this2.mainNavOverlay=mainNavOverlay},onClick:function onClick(event){return _this2.toggle(event)},className:'au-main-nav__overlay'}))}}]);return AUmainNavContent}(_react2.default.PureComponent);;AUmainNavContent.propTypes={dark:_propTypes2.default.bool,alt:_propTypes2.default.bool,children:_propTypes2.default.node,speed:_propTypes2.default.number,onOpen:_propTypes2.default.func,afterOpen:_propTypes2.default.func,onClose:_propTypes2.default.func,afterClose:_propTypes2.default.func,className:_propTypes2.default.string};var AUmainNav=function AUmainNav(_ref2){var dark=_ref2.dark,alt=_ref2.alt,className=_ref2.className,ariaLabel=_ref2.ariaLabel,children=_ref2.children,attributeOptions=_objectWithoutProperties(_ref2,['dark','alt','className','ariaLabel','children']);return _react2.default.createElement('nav',_extends({className:'au-main-nav '+(''+(dark?' au-main-nav--dark':''))+(''+(alt?' au-main-nav--alt':''))+(''+(className?' '+className:'')),'aria-label':ariaLabel},attributeOptions),children)};AUmainNav.propTypes={dark:_propTypes2.default.bool,alt:_propTypes2.default.bool,ariaLabel:_propTypes2.default.string,children:_propTypes2.default.node.isRequired};AUmainNav.defaultProps={ariaLabel:'main navigation'};exports.default=AUmainNav;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlYWN0LmVzNS5qcyJdLCJuYW1lcyI6WyJBVW1haW5OYXZNZW51IiwiaXRlbXMiLCJsaW5rQ29tcG9uZW50IiwiR2VuZXJhdGVNZW51IiwibWVudSIsIm1hcCIsImxpbmsiLCJpdGVtIiwiYWN0aXZlIiwidGV4dCIsImxpIiwiY2xhc3NOYW1lIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiYXJyYXlPZiIsInNoYXBlIiwic3RyaW5nIiwibm9kZSIsImlzUmVxdWlyZWQiLCJjaGlsZHJlbiIsImFycmF5Iiwib25lT2ZUeXBlIiwiZnVuYyIsImRlZmF1bHRQcm9wcyIsIklEdmFsdWUiLCJBVW1haW5OYXZDb250ZW50IiwicHJvcHMiLCJvbk9wZW4iLCJhZnRlck9wZW4iLCJvbkNsb3NlIiwiYWZ0ZXJDbG9zZSIsImF0dHJpYnV0ZU9wdGlvbnMiLCJ0b2dnbGVDbGFzc2VzIiwiYmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJtYWluTmF2VG9nZ2xlIiwidG9nZ2xlIiwidG9nZ2xlQW5pbWF0aW9uU3RhdGUiLCJzZXRTdGF0ZSIsImFuaW1hdGluZyIsInN0YXRlIiwiYXVGb2N1c1RyYXBMaXN0ZW5lclRvcCIsImF1Rm9jdXNUcmFwTGlzdGVuZXJCb3R0b20iLCJhdUtleUxpc3RlbmVyIiwiY2xvc2VkIiwiaWQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicHJldlByb3BzIiwicHJldlN0YXRlIiwidW5kZWZpbmVkIiwibWFpbk5hdkNvbnRlbnQiLCJzcGVlZCIsImVsZW1lbnQiLCJvcGVuaW5nQ2xhc3MiLCJjbG9zaW5nQ2xhc3MiLCJvbGRDbGFzcyIsIm5ld0NsYXNzIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwicmVwbGFjZSIsIlJlZ0V4cCIsInNwbGl0Iiwiam9pbiIsImFkZCIsImZvY3VzQ29udGVudCIsIm1haW5OYXZNZW51IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImZvY3VzIiwib3ZlcmxheU9wZW4iLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwibWFpbk5hdk92ZXJsYXkiLCJnZXRQcm9wZXJ0eVZhbHVlIiwia2V5Q29kZSIsImNhbGxiYWNrcyIsImNhbmNlbEJ1YmJsZSIsInN0b3BQcm9wYWdhdGlvbiIsImVycm9yIiwib3ZlcmxheSIsImNsb3NlQnV0dG9uIiwicXVlcnlTZWxlY3RvciIsIm9wZW5CdXR0b24iLCJmb2N1c3RyYXBUb3AiLCJmb2N1c3RyYXBCb3R0b20iLCJtZW51V2lkdGgiLCJvZmZzZXRXaWR0aCIsIlRvZ2dsZUNsYXNzZXMiLCJBVWtleUxpc3RlbmVyIiwiQVVmb2N1c1RyYXBMaXN0ZW5lclRvcCIsIkFVZm9jdXNUcmFwTGlzdGVuZXJCb3R0b20iLCJUb2dnbGVBbmltYXRpb25TdGF0ZSIsInN0eWxlIiwiZGlzcGxheSIsIkFVIiwiYW5pbWF0ZSIsIlRvZ2dsZSIsInByb3BlcnR5Iiwib3BlblNpemUiLCJjbG9zZVNpemUiLCJwcmVmdW5jdGlvbiIsImxlZnQiLCJvcGFjaXR5IiwicG9zdGZ1bmN0aW9uIiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRvY3VtZW50IiwicmVtb3ZlQXR0cmlidXRlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJSZWFjdCIsIlB1cmVDb21wb25lbnQiLCJkYXJrIiwiYm9vbCIsImFsdCIsIm51bWJlciIsIkFVbWFpbk5hdiIsImFyaWFMYWJlbCJdLCJtYXBwaW5ncyI6InlpQ0FTQSw0QiwyQ0FDQSxxQyxtREFFQSx3QywrQ0FHQSwyQyxpREFPQSw2Qixna0NBdEJBLDhCQUNBOzs7Ozs7Z0tBV2tDO0FBSWxDO0FBR0E7QUFDQTtBQUNBO0FBSUE7Ozs7O0dBTUEsR0FBTUEsZUFBZ0IsUUFBaEJBLGNBQWdCLE1BQThCLElBQTNCQyxNQUEyQixNQUEzQkEsS0FBMkIsQ0FBcEJDLGFBQW9CLE1BQXBCQSxhQUFvQixDQUNuRDtBQUNBLEdBQU1DLGNBQWUsUUFBZkEsYUFBZSxDQUFFRixLQUFGLENBQWEsQ0FDakMsR0FBTUcsTUFBT0gsTUFBTUks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QUE3QixDQWFBLEdBQU1zRyxXQUFZLFFBQVpBLFVBQVksV0FBR0osS0FBSCxPQUFHQSxJQUFILENBQVNFLEdBQVQsT0FBU0EsR0FBVCxDQUFjekcsU0FBZCxPQUFjQSxTQUFkLENBQXlCNEcsU0FBekIsT0FBeUJBLFNBQXpCLENBQW9DcEcsUUFBcEMsT0FBb0NBLFFBQXBDLENBQWlEWSxnQkFBakQseUZBQ2pCLCtDQUNDLFVBQ0Msb0JBQ0ltRixLQUFPLG9CQUFQLENBQThCLEVBRGxDLFFBRUlFLElBQU0sbUJBQU4sQ0FBNEIsRUFGaEMsUUFHSXpHLFVBQVksSUFBTUEsU0FBbEIsQ0FBOEIsRUFIbEMsRUFGRixDQU9DLGFBQWU0RyxTQVBoQixFQVFNeEYsZ0JBUk4sRUFVR1osUUFWSCxDQURpQixDQUFsQixDQWVBbUcsVUFBVTFHLFNBQVYsQ0FBc0IsQ0FDckJzRyxLQUFNckcsb0JBQVVzRyxJQURLLENBRXJCQyxJQUFLdkcsb0JBQVVzRyxJQUZNLENBR3JCSSxVQUFXMUcsb0JBQVVHLE1BSEEsQ0FJckJHLFNBQVVOLG9CQUFVSSxJQUFWLENBQWVDLFVBSkosQ0FBdEIsQ0FPQW9HLFVBQVUvRixZQUFWLENBQXlCLENBQ3hCZ0csVUFBVyxpQkFEYSxDQUF6QixDLGdCQUllRCxTIiwiZmlsZSI6InJlYWN0LmVzNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBAZ292LmF1L21haW4tbmF2IHYxLjAuMyAqL1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICpcbiAqIG1haW5OYXYgZnVuY3Rpb25cbiAqXG4gKiBIb3Jpem9udGFsIGxpc3Qgb2YgbGlua3MgdG8ga2V5IGFyZWFzIG9uIHRoZSB3ZWJzaXRlLiBVc3VhbGx5IGxvY2F0ZWQgaW4gdGhlIGhlYWRlci5cbiAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuXG5pbXBvcnQgQVUgZnJvbSAnQGdvdi5hdS9hbmltYXRlJzsgLy8gaW50ZXJkZXBlbmRlbmN5IHdpdGggb3VyIGFuaW1hdGUgbGliXG5cblxuaW1wb3J0IEFVbGlua0xpc3QgZnJvbSAnQGdvdi5hdS9saW5rLWxpc3QnO1xuLy8gRVM2IGRlcGVuZGVuY3k6IGltcG9ydCBBVWxpbmtMaXN0IGZyb20gJy4vbGluay1saXN0JztcblxuXG4vLyBUaGUgZm9sbG93aW5nIGxpbmUgd2lsbCBiZSByZXBsYWNlZCBhdXRvbWF0aWNhbGx5IHdpdGggZ2VuZXJpYyBpbXBvcnRzIGZvciB0aGUgRVM1IHBpcGVsaW5lLlxuLy8gWW91IGNhbiBzYWZlbHkgaWdub3JlIHRoaXMgYml0IGlmIHlvdSB1c2UgdGhpcyBtb2R1bGUgd2l0aCBwYW5jYWtlXG4vL1xuaW1wb3J0ICcuLi9jc3Mvc3R5bGVzLmNzcyc7XG5cblxuLyoqXG4gKiBBIG1lbnUgaW5zaWRlIHRoZSBBVW1haW5OYXZcbiAqXG4gKiBAcGFyYW0gIHthcnJheX0gIGl0ZW1zICAgICAgICAgICAgLSBUaGUgbGlua3MgaW4gYW4gYXJyYXkgY29udGFpbmluZyB0ZXh0LCBsb2NhdGlvbiBhbmQgYWN0aXZlIHN0YXR1c1xuICogQHBhcmFtICB7c3RyaW5nfSBsaW5rQ29tcG9uZW50ICAgIC0gVGhlIGNvbXBvbmVudCB1c2VkIGZvciB0aGUgbGlua1xuICovXG5jb25zdCBBVW1haW5OYXZNZW51ID0gKHsgaXRlbXMsIGxpbmtDb21wb25lbnQgfSkgPT4ge1xuXHQvLyBHZW5lcmF0ZSB0aGUgbWVudVxuXHRjb25zdCBHZW5lcmF0ZU1lbnUgPSAoIGl0ZW1zICkgPT4ge1xuXHRcdGNvbnN0IG1lbnUgPSBpdGVtcy5tYXAoIGl0ZW0gPT4ge1xuXHRcdFx0Y29uc3QgbGluayA9ICBpdGVtLmFjdGl2ZSA/IHtcblx0XHRcdFx0bGluazogaXRlbS5saW5rLFxuXHRcdFx0XHR0ZXh0OiBpdGVtLnRleHQsXG5cdFx0XHRcdCdhcmlhLWN1cnJlbnQnOiAncGFnZScsXG5cdFx0XHRcdGxpOiB7XG5cdFx0XHRcdFx0Y2xhc3NOYW1lOiAnYWN0aXZlJyxcblx0XHRcdFx0fSxcblx0XHRcdH0gOlxuXHRcdFx0e1xuXHRcdFx0XHRsaW5rOiBpdGVtLmxpbmssXG5cdFx0XHRcdHRleHQ6IGl0ZW0udGV4dCxcblx0XHRcdH07XG5cblx0XHRcdC8vIHJldHVybiB0aGUgbGluaywgbWF5YmUgd2l0aCBjaGlsZHJlblxuXHRcdFx0cmV0dXJuIGxpbms7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gbWVudTtcblx0fVxuXG5cdC8vIENyZWF0ZSB0aGUgbWVudSB3aXRoIGNoaWxkcmVuXG5cdHJldHVybiAoXG5cdFx0PEFVbGlua0xpc3QgaXRlbXM9eyBHZW5lcmF0ZU1lbnUoIGl0ZW1zICkgfSBsaW5rQ29tcG9uZW50PXsgbGlua0NvbXBvbmVudCB9IC8+XG5cdCk7XG59XG5cblxuQVVtYWluTmF2TWVudS5wcm9wVHlwZXMgPSB7XG5cdGl0ZW1zOiBQcm9wVHlwZXMuYXJyYXlPZihcblx0XHRQcm9wVHlwZXMuc2hhcGUoe1xuXHRcdFx0bGluazogUHJvcFR5cGVzLnN0cmluZyxcblx0XHRcdHRleHQ6IFByb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQsXG5cdFx0XHRjaGlsZHJlbjogUHJvcFR5cGVzLmFycmF5LFxuXHRcdH0pXG5cdCkuaXNSZXF1aXJlZCxcblx0bGlua0NvbXBvbmVudDogUHJvcFR5cGVzLm9uZU9mVHlwZShbIFByb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5mdW5jIF0pLFxufTtcblxuQVVtYWluTmF2TWVudS5kZWZhdWx0UHJvcHMgPSB7XG5cdGxpbmtDb21wb25lbnQ6ICdhJyxcbn07XG5cblxuLy8gVGhpcyB2YWx1ZSBnZXRzIGluY3JlYXNlZCBmb3IgZWFjaCBuYXZpZ2F0aW9uIGNvbXBvbmVudFxubGV0IElEdmFsdWUgPSAwO1xuXG5cbmV4cG9ydCBjbGFzcyBBVW1haW5OYXZDb250ZW50IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG5cdGNvbnN0cnVjdG9yKCBwcm9wcyApIHtcblx0XHRzdXBlciggcHJvcHMgKTtcblxuXHRcdGNvbnN0IHtcblx0XHRcdGl0ZW1zLFxuXHRcdFx0Y2xhc3NOYW1lID0gJycsXG5cdFx0XHRjaGlsZHJlbixcblx0XHRcdGxpbmtDb21wb25lbnQsXG5cdFx0XHRvbk9wZW4sXG5cdFx0XHRhZnRlck9wZW4sXG5cdFx0XHRvbkNsb3NlLFxuXHRcdFx0YWZ0ZXJDbG9zZSxcblx0XHRcdC4uLmF0dHJpYnV0ZU9wdGlvbnNcblx0XHR9ID0gcHJvcHM7XG5cblx0XHQvLyBGdW5jdGlvbnNcblx0XHR0aGlzLnRvZ2dsZUNsYXNzZXMgICAgICAgID0gdGhpcy50b2dnbGVDbGFzc2VzLmJpbmQoIHRoaXMgKTtcblx0XHR0aGlzLnJlbW92ZUNsYXNzICAgICAgICAgID0gdGhpcy5yZW1vdmVDbGFzcy5iaW5kKCB0aGlzICk7XG5cdFx0dGhpcy5hZGRDbGFzcyAgICAgICAgICAgICA9IHRoaXMuYWRkQ2xhc3MuYmluZCggdGhpcyApO1xuXHRcdHRoaXMubWFpbk5hdlRvZ2dsZSAgICAgICAgPSB0aGlzLm1haW5OYXZUb2dnbGUuYmluZCggdGhpcyApO1xuXHRcdHRoaXMudG9nZ2xlICAgICAgICAgICAgICAgPSB0aGlzLnRvZ2dsZS5iaW5kKCB0aGlzICk7XG5cdFx0dGhpcy50b2dnbGVBbmltYXRpb25TdGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7IGFuaW1hdGluZzogIXRoaXMuc3RhdGUuYW5pbWF0aW5nIH0gKVxuXHRcdH0uYmluZCggdGhpcyApO1xuXG5cblx0XHQvLyBFdmVudCBsaXN0ZW5lcnNcblx0XHR0aGlzLmF1Rm9jdXNUcmFwTGlzdGVuZXJUb3AgICAgPSB0aGlzLmF1Rm9jdXNUcmFwTGlzdGVuZXJUb3AuYmluZCggdGhpcyApO1xuXHRcdHRoaXMuYXVGb2N1c1RyYXBMaXN0ZW5lckJvdHRvbSA9IHRoaXMuYXVGb2N1c1RyYXBMaXN0ZW5lckJvdHRvbS5iaW5kKCB0aGlzICk7XG5cdFx0dGhpcy5hdUtleUxpc3RlbmVyICAgICAgICAgICAgID0gdGhpcy5hdUtleUxpc3RlbmVyLmJpbmQoIHRoaXMgKTtcblxuXG5cdFx0Ly8gVmFyaWFibGVzXG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdGNsb3NlZDogdHJ1ZSxcblx0XHRcdGFuaW1hdGluZzogZmFsc2UsXG5cdFx0fTtcblxuXG5cdFx0Ly8gSW5jcmVhc2UgdGhlIElEIHNvIGl0J3MgdW5pcXVlIGZvciBlYWNoIGluc3RhbmNlXG5cdFx0SUR2YWx1ZSArPSAxO1xuXHRcdHRoaXMuaWQgPSBgYXUtbWFpbi1uYXYtJHsgSUR2YWx1ZSB9YDtcblx0fVxuXG5cblx0LyoqXG5cdCAqIFRvZ2dsZSBhbiBtYWluIG5hdmlnYXRpb24gb24gY2xpY2tcblx0ICpcblx0ICogQHBhcmFtICB7ZXZlbnQgb2JqZWN0fSBldmVudCAtIFRoZSBldmVudCBvYmplY3Qgb2YgdGhlIGNsaWNrXG5cdCAqL1xuXHR0b2dnbGUoIGV2ZW50ICkge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHQvLyBJZiB0aGUgbWFpbiBtZW51IGlzIGFuaW1hdGluZyBkb24ndCBjaGFuZ2UgdG9nZ2xlIHRoZSBtZW51XG5cdFx0aWYoIHRoaXMuc3RhdGUuYW5pbWF0aW5nICl7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gVG9nZ2xlIHRoZSBtZW51J3MgY3VycmVudCBzdGF0ZVxuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0Y2xvc2VkOiAhdGhpcy5zdGF0ZS5jbG9zZWQsXG5cdFx0XHRhbmltYXRpbmc6IHRydWUsXG5cdFx0fSk7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBjb21wb25lbnREaWRVcGRhdGUgLSBVcGRhdGUgdGhlIGNvbXBvbmVudCB3aGVuIGl0IGNoYW5nZXNcblx0ICpcblx0ICogQHBhcmFtIHsqfSBwcmV2UHJvcHMgLSBUaGUgcHJldmlvdXMgcHJvcGVydHkgdmFsdWVzXG5cdCAqIEBwYXJhbSB7Kn0gcHJldlN0YXRlIC0gVGhlIHByZXZpb3VzIHN0YXRlIHZhbHVlc1xuXHQgKi9cblx0Y29tcG9uZW50RGlkVXBkYXRlKCBwcmV2UHJvcHMsIHByZXZTdGF0ZSApe1xuXHRcdGlmKCBwcmV2U3RhdGUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5zdGF0ZS5jbG9zZWQgIT09IHByZXZTdGF0ZS5jbG9zZWQgKSB7XG5cdFx0XHR0aGlzLm1haW5OYXZUb2dnbGUoIHRoaXMubWFpbk5hdkNvbnRlbnQsIHRoaXMucHJvcHMuc3BlZWQsIHtcblx0XHRcdFx0b25PcGVuOiB0aGlzLnByb3BzLm9uT3Blbixcblx0XHRcdFx0YWZ0ZXJPcGVuOiB0aGlzLnByb3BzLmFmdGVyT3Blbixcblx0XHRcdFx0b25DbG9zZTogdGhpcy5wcm9wcy5vbkNsb3NlLFxuXHRcdFx0XHRhZnRlckNsb3NlOiB0aGlzLnByb3BzLmFmdGVyQ2xvc2UsXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBJRTggY29tcGF0aWJsZSBmdW5jdGlvbiBmb3IgcmVwbGFjaW5nIGNsYXNzZXMgb24gYSBET00gbm9kZVxuXHQgKlxuXHQgKiBAcGFyYW0gIHtvYmplY3R9IGVsZW1lbnQgICAgICAgLSBUaGUgRE9NIGVsZW1lbnQgd2Ugd2FudCB0byB0b2dnbGUgY2xhc3NlcyBvblxuXHQgKiBAcGFyYW0gIHtzdHJpbmd9IG9wZW5pbmdDbGFzcyAgLSBUaGUgZmlyc3RDbGFzcyB5b3Ugd2FudCB0byB0b2dnbGUgb24gdGhlIERPTSBub2RlXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gY2xvc2luZ0NsYXNzICAtIFRoZSBzZWNvbmRDbGFzcyB5b3Ugd2FudCB0byB0b2dnbGUgb24gdGhlIERPTSBub2RlXG5cdCAqL1xuXHR0b2dnbGVDbGFzc2VzKCBlbGVtZW50LCBzdGF0ZSwgb3BlbmluZ0NsYXNzLCBjbG9zaW5nQ2xhc3MgKSB7XG5cdFx0aWYoIHN0YXRlID09PSAnb3BlbmluZycgfHwgc3RhdGUgPT09ICdvcGVuJyApIHtcblx0XHRcdHZhciBvbGRDbGFzcyA9IG9wZW5pbmdDbGFzcyB8fCAnYXUtbWFpbi1uYXZfX2NvbnRlbnQtLWNsb3NlZCc7XG5cdFx0XHR2YXIgbmV3Q2xhc3MgPSBjbG9zaW5nQ2xhc3MgfHwgJ2F1LW1haW4tbmF2X19jb250ZW50LS1vcGVuJztcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR2YXIgb2xkQ2xhc3MgPSBjbG9zaW5nQ2xhc3MgfHwgJ2F1LW1haW4tbmF2X19jb250ZW50LS1vcGVuJztcblx0XHRcdHZhciBuZXdDbGFzcyA9IG9wZW5pbmdDbGFzcyB8fCAnYXUtbWFpbi1uYXZfX2NvbnRlbnQtLWNsb3NlZCc7XG5cdFx0fVxuXG5cdFx0dGhpcy5yZW1vdmVDbGFzcyggZWxlbWVudCwgb2xkQ2xhc3MgKTtcblx0XHR0aGlzLmFkZENsYXNzKCBlbGVtZW50LCBuZXdDbGFzcyApO1xuXHR9XG5cblxuXHQvKipcblx0ICogSUU4IGNvbXBhdGlibGUgZnVuY3Rpb24gZm9yIHJlbW92aW5nIGEgY2xhc3Ncblx0ICpcblx0ICogQHBhcmFtICB7b2JqZWN0fSBlbGVtZW50ICAgLSBUaGUgRE9NIGVsZW1lbnQgd2Ugd2FudCB0byBtYW5pcHVsYXRlXG5cdCAqIEBwYXJhbSAge29iamVjdH0gY2xhc3NOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGNsYXNzIHRvIGJlIHJlbW92ZWRcblx0ICovXG5cdHJlbW92ZUNsYXNzKCBlbGVtZW50LCBjbGFzc05hbWUgKSB7XG5cdFx0aWYoIGVsZW1lbnQuY2xhc3NMaXN0ICkge1xuXHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCBjbGFzc05hbWUgKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoIG5ldyBSZWdFeHAoXCIoXnxcXFxcYilcIiArIGNsYXNzTmFtZS5zcGxpdChcIiBcIikuam9pbihcInxcIikgKyBcIihcXFxcYnwkKVwiLCBcImdpXCIpLCBcIiBcIiApO1xuXHRcdH1cblx0fVxuXG5cblx0LyoqXG5cdCAqIElFOCBjb21wYXRpYmxlIGZ1bmN0aW9uIGZvciBhZGRpbmcgYSBjbGFzc1xuXHQgKlxuXHQgKiBAcGFyYW0gIHtvYmplY3R9IGVsZW1lbnQgICAtIFRoZSBET00gZWxlbWVudCB3ZSB3YW50IHRvIG1hbmlwdWxhdGVcblx0ICogQHBhcmFtICB7b2JqZWN0fSBjbGFzc05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgY2xhc3MgdG8gYmUgYWRkZWRcblx0ICovXG5cdGFkZENsYXNzKCBlbGVtZW50LCBjbGFzc05hbWUgKSB7XG5cdFx0aWYoIGVsZW1lbnQuY2xhc3NMaXN0ICkge1xuXHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKCBjbGFzc05hbWUgKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lICsgXCIgXCIgKyBjbGFzc05hbWU7XG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogYXVGb2N1c1RyYXBMaXN0ZW5lclRvcCAtIFdoYXQgaGFwcGVucyB3aGVuIHRoZSBmb2N1cyB0cmFwIHRvcCBnZXRzIGZvY3VzXG5cdCAqXG5cdCAqIEBwYXJhbSB7ZXZlbnR9IGV2ZW50IC0gdGhlIGV2ZW50XG5cdCAqL1xuXHRhdUZvY3VzVHJhcExpc3RlbmVyVG9wKCBldmVudCApIHtcblx0XHR2YXIgZm9jdXNDb250ZW50ID0gdGhpcy5tYWluTmF2TWVudS5xdWVyeVNlbGVjdG9yQWxsKCAnYSwgLmF1LW1haW4tbmF2X190b2dnbGUnICk7XG5cdFx0Zm9jdXNDb250ZW50WyBmb2N1c0NvbnRlbnQubGVuZ3RoIC0gMSBdLmZvY3VzKCk7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBhdUZvY3VzVHJhcExpc3RlbmVyQm90dG9tIC0gV2hhdCBoYXBwZW5zIHdoZW4gdGhlIGZvY3VzIHRyYXAgYm90dG9tIGdldHMgZm9jdXNcblx0ICpcblx0ICogQHBhcmFtIHtldmVudH0gZXZlbnQgLSB0aGUgZXZlbnRcblx0ICovXG5cdGF1Rm9jdXNUcmFwTGlzdGVuZXJCb3R0b20oIGV2ZW50ICkge1xuXHRcdHZhciBmb2N1c0NvbnRlbnQgPSB0aGlzLm1haW5OYXZNZW51LnF1ZXJ5U2VsZWN0b3JBbGwoICdhLCAuYXUtbWFpbi1uYXZfX3RvZ2dsZScgKTtcblx0XHRmb2N1c0NvbnRlbnRbIDAgXS5mb2N1cygpO1xuXHR9XG5cblxuXHQvKipcblx0ICogYXVLZXlMaXN0ZW5lciAtIFdoYXQgaGFwcGVucyB3aGVuIGEga2V5IGdldHMgcHJlc3NlZCBhbmQgdGhlIG1lbnUgaXMgb3BlblxuXHQgKlxuXHQgKiBAcGFyYW0ge2V2ZW50fSBldmVudCAtIHRoZSBldmVudFxuXHQgKi9cblx0YXVLZXlMaXN0ZW5lciggZXZlbnQgKSB7XG5cdFx0Ly8gVGhpcyBzaG91bGQgb25seSBjbG9zZSB0aGUgbWVudSB3aGVuIHRoZSBtZW51IGlzIHZpc2libHkgb3BlblxuXHRcdHZhciBvdmVybGF5T3BlbiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCB0aGlzLm1haW5OYXZPdmVybGF5ICkuZ2V0UHJvcGVydHlWYWx1ZSggJ2Rpc3BsYXknICk7XG5cblx0XHQvLyBDaGVjayB0aGUgbWVudSBpcyBvcGVuIGFuZCB2aXNpYmxlIGFuZCB0aGUgZXNjYXBlIGtleSBpcyBwcmVzc2VkXG5cdFx0aWYoIGV2ZW50LmtleUNvZGUgPT09IDI3ICYmIG92ZXJsYXlPcGVuID09PSAnYmxvY2snICkge1xuXHRcdFx0dGhpcy50b2dnbGUoIGV2ZW50ICk7XG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogVG9nZ2xlIGEgbWFpbk5hdiBlbGVtZW50XG5cdCAqXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gIGVsZW1lbnQgIC0gVGhlIHRvZ2dsZSBmb3IgdGhlIG1haW4gbmF2XG5cdCAqIEBwYXJhbSAge2ludGVnZXJ9IHNwZWVkICAgIC0gVGhlIHNwZWVkIGluIG1zIGZvciB0aGUgYW5pbWF0aW9uXG5cdCAqXG5cdCAqL1xuXHRtYWluTmF2VG9nZ2xlKCBlbGVtZW50LCBzcGVlZCwgY2FsbGJhY2tzICkge1xuXHRcdC8vIHN0b3AgZXZlbnQgcHJvcGFnYXRpb25cblx0XHR0cnkge1xuXHRcdFx0d2luZG93LmV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdFx0Y2F0Y2goIGVycm9yICkge31cblxuXHRcdC8vIGNoZWNrIHRoaXMgb25jZVxuXHRcdGlmKCB0eXBlb2YgY2FsbGJhY2tzICE9ICdvYmplY3QnICkge1xuXHRcdFx0Y2FsbGJhY2tzID0ge307XG5cdFx0fVxuXG5cblx0XHQvLyBFbGVtZW50cyB3ZSBtb2RpZnlcblx0XHR2YXIgbWVudSAgICAgICAgICAgID0gdGhpcy5tYWluTmF2TWVudTtcblx0XHR2YXIgb3ZlcmxheSAgICAgICAgID0gdGhpcy5tYWluTmF2T3ZlcmxheTtcblx0XHR2YXIgY2xvc2VCdXR0b24gICAgID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCAnLmF1LW1haW4tbmF2X190b2dnbGUtLWNsb3NlJyApO1xuXHRcdHZhciBvcGVuQnV0dG9uICAgICAgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoICcuYXUtbWFpbi1uYXZfX3RvZ2dsZS0tb3BlbicgKTtcblx0XHR2YXIgZm9jdXN0cmFwVG9wICAgID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCAnLmF1LW1haW4tbmF2X19mb2N1cy10cmFwLXRvcCcgKTtcblx0XHR2YXIgZm9jdXN0cmFwQm90dG9tID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCAnLmF1LW1haW4tbmF2X19mb2N1cy10cmFwLWJvdHRvbScgKTtcblxuXHRcdHZhciBjbG9zZWQgICAgICAgICAgPSAhdGhpcy5zdGF0ZS5jbG9zZWQ7XG5cdFx0dmFyIHN0YXRlICAgICAgICAgICA9IGNsb3NlZCA/ICdvcGVuaW5nJyA6ICcnO1xuXHRcdHZhciBtZW51V2lkdGggICAgICAgPSBtZW51Lm9mZnNldFdpZHRoO1xuXG5cblx0XHQvLyBGdW5jdGlvbnNcblx0XHR2YXIgVG9nZ2xlQ2xhc3NlcyAgICAgICAgICAgICA9IHRoaXMudG9nZ2xlQ2xhc3Nlcztcblx0XHR2YXIgQVVrZXlMaXN0ZW5lciAgICAgICAgICAgICA9IHRoaXMuYXVLZXlMaXN0ZW5lcjtcblx0XHR2YXIgQVVmb2N1c1RyYXBMaXN0ZW5lclRvcCAgICA9IHRoaXMuYXVGb2N1c1RyYXBMaXN0ZW5lclRvcDtcblx0XHR2YXIgQVVmb2N1c1RyYXBMaXN0ZW5lckJvdHRvbSA9IHRoaXMuYXVGb2N1c1RyYXBMaXN0ZW5lckJvdHRvbTtcblx0XHR2YXIgVG9nZ2xlQW5pbWF0aW9uU3RhdGUgICAgICA9IHRoaXMudG9nZ2xlQW5pbWF0aW9uU3RhdGU7XG5cblxuXHRcdG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cblxuXHRcdChmdW5jdGlvbiggbWVudSApIHtcblx0XHRcdEFVLmFuaW1hdGUuVG9nZ2xlKHtcblx0XHRcdFx0ZWxlbWVudDogbWVudSxcblx0XHRcdFx0cHJvcGVydHk6ICdsZWZ0Jyxcblx0XHRcdFx0b3BlblNpemU6IDAsXG5cdFx0XHRcdGNsb3NlU2l6ZTogLTEgKiBtZW51V2lkdGgsXG5cdFx0XHRcdHNwZWVkOiBzcGVlZCB8fCAyNTAsXG5cdFx0XHRcdHByZWZ1bmN0aW9uOiBmdW5jdGlvbiggKSB7XG5cdFx0XHRcdFx0Ly8gU2V0IHRoZXNlIHZhbHVlIGltbWVkaWF0ZWx5IGZvciB0cmFuc2l0aW9uc1xuXHRcdFx0XHRcdGlmKCBzdGF0ZSA9PT0gJ29wZW5pbmcnICkge1xuXHRcdFx0XHRcdFx0bWVudS5zdHlsZS5kaXNwbGF5ICAgID0gJ2Jsb2NrJztcblx0XHRcdFx0XHRcdG92ZXJsYXkuc3R5bGUubGVmdCAgICA9IDA7XG5cdFx0XHRcdFx0XHRvdmVybGF5LnN0eWxlLm9wYWNpdHkgPSAwLjU7XG5cblx0XHRcdFx0XHRcdC8vIHJ1biB3aGVuIG9wZW5pbmdcblx0XHRcdFx0XHRcdGlmKCB0eXBlb2YgY2FsbGJhY2tzLm9uT3BlbiA9PT0gJ2Z1bmN0aW9uJyApIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLm9uT3BlbigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdG92ZXJsYXkuc3R5bGUub3BhY2l0eSA9ICcwJztcblxuXHRcdFx0XHRcdFx0Ly8gcnVuIHdoZW4gY2xvc2luZ1xuXHRcdFx0XHRcdFx0aWYoIHR5cGVvZiBjYWxsYmFja3Mub25DbG9zZSA9PT0gJ2Z1bmN0aW9uJyApIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLm9uQ2xvc2UoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHBvc3RmdW5jdGlvbjogZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRpZiAoIHN0YXRlID09PSAnb3BlbmluZycgKXtcblxuXHRcdFx0XHRcdFx0Ly8gTW92ZSB0aGUgZm9jdXMgdG8gdGhlIGNsb3NlIGJ1dHRvblxuXHRcdFx0XHRcdFx0Y2xvc2VCdXR0b24uZm9jdXMoKTtcblxuXG5cdFx0XHRcdFx0XHQvLyBGb2N1cyB0cmFwIGVuYWJsZWRcblx0XHRcdFx0XHRcdGZvY3VzdHJhcFRvcC5zZXRBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiwgMCApO1xuXHRcdFx0XHRcdFx0Zm9jdXN0cmFwQm90dG9tLnNldEF0dHJpYnV0ZSggXCJ0YWJpbmRleFwiLCAwICk7XG5cblxuXHRcdFx0XHRcdFx0Zm9jdXN0cmFwVG9wLmFkZEV2ZW50TGlzdGVuZXIoICdmb2N1cycsIEFVZm9jdXNUcmFwTGlzdGVuZXJUb3AgKTtcblx0XHRcdFx0XHRcdGZvY3VzdHJhcEJvdHRvbS5hZGRFdmVudExpc3RlbmVyKCAnZm9jdXMnLCBBVWZvY3VzVHJhcExpc3RlbmVyQm90dG9tICk7XG5cblx0XHRcdFx0XHRcdC8vIEFkZCBrZXkgbGlzdGVuZXJcblx0XHRcdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdrZXl1cCcsIEFVa2V5TGlzdGVuZXIgKTtcblxuXHRcdFx0XHRcdFx0aWYoIHR5cGVvZiBjYWxsYmFja3MuYWZ0ZXJPcGVuID09PSAnZnVuY3Rpb24nICkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFja3MuYWZ0ZXJPcGVuKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gTW92ZSB0aGUgZm9jdXMgYmFjayB0byB0aGUgbWVudSBidXR0b25cblx0XHRcdFx0XHRcdG9wZW5CdXR0b24uZm9jdXMoKTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBmb2N1cyB0cmFwXG5cdFx0XHRcdFx0XHRmb2N1c3RyYXBUb3AucmVtb3ZlQXR0cmlidXRlKCBcInRhYmluZGV4XCIgKTtcblx0XHRcdFx0XHRcdGZvY3VzdHJhcEJvdHRvbS5yZW1vdmVBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiApO1xuXG5cblx0XHRcdFx0XHRcdC8vIFJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXJzXG5cdFx0XHRcdFx0XHRmb2N1c3RyYXBUb3AucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2ZvY3VzJywgQVVmb2N1c1RyYXBMaXN0ZW5lclRvcCApO1xuXHRcdFx0XHRcdFx0Zm9jdXN0cmFwQm90dG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdmb2N1cycsIEFVZm9jdXNUcmFwTGlzdGVuZXJCb3R0b20gKTtcblxuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUga2V5cHJlc3Ncblx0XHRcdFx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdrZXl1cCcsIEFVa2V5TGlzdGVuZXIgKTtcblxuXHRcdFx0XHRcdFx0aWYoIHR5cGVvZiBjYWxsYmFja3MuYWZ0ZXJDbG9zZSA9PT0gJ2Z1bmN0aW9uJyApIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLmFmdGVyQ2xvc2UoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHRcdC8vIFRvZ2dsZSBjbGFzc2VzXG5cdFx0XHRcdFx0VG9nZ2xlQ2xhc3NlcyggZWxlbWVudCwgc3RhdGUgKTtcblx0XHRcdFx0XHRUb2dnbGVDbGFzc2VzKFxuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuYm9keSxcblx0XHRcdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRcdFx0J2F1LW1haW4tbmF2X19zY3JvbGwtLXVubG9ja2VkJyxcblx0XHRcdFx0XHRcdCdhdS1tYWluLW5hdl9fc2Nyb2xsLS1sb2NrZWQnLFxuXHRcdFx0XHRcdCk7XG5cblxuXHRcdFx0XHRcdC8vIFJlc2V0IGlubGluZSBzdHlsZXNcblx0XHRcdFx0XHRtZW51LnN0eWxlLmRpc3BsYXkgICAgPSAnJztcblx0XHRcdFx0XHRtZW51LnN0eWxlLmxlZnQgICAgICAgPSAnJztcblx0XHRcdFx0XHRvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnJztcblx0XHRcdFx0XHRvdmVybGF5LnN0eWxlLmxlZnQgICAgPSAnJztcblx0XHRcdFx0XHRvdmVybGF5LnN0eWxlLm9wYWNpdHkgPSAnJztcblxuXG5cdFx0XHRcdFx0Ly8gVG9nZ2xlIHRoZSBhbmltYXRpbmcgc3RhdGUgdG8gZmFsc2Ugc28gdGhhdCB3ZSBjYW4gYWxsb3cgdG9nZ2xpbmcgYWdhaW5cblx0XHRcdFx0XHRUb2dnbGVBbmltYXRpb25TdGF0ZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cdFx0fSkoIG1lbnUgKTtcblx0fVxuXG5cblx0cmVuZGVyKCl7XG5cdFx0cmV0dXJuIChcblx0XHRcdDxkaXZcblx0XHRcdFx0aWQ9eyB0aGlzLmlkIH1cblx0XHRcdFx0Y2xhc3NOYW1lPVwiYXUtbWFpbi1uYXZfX2NvbnRlbnRcIlxuXHRcdFx0XHRyZWY9eyBtYWluTmF2Q29udGVudCA9PiB7IHRoaXMubWFpbk5hdkNvbnRlbnQgPSBtYWluTmF2Q29udGVudCB9fT5cblx0XHRcdFx0PGJ1dHRvblxuXHRcdFx0XHRcdGFyaWEtY29udHJvbHM9eyB0aGlzLmlkIH1cblx0XHRcdFx0XHRvbkNsaWNrPXsgKCBldmVudCApID0+IHRoaXMudG9nZ2xlKCBldmVudCApIH1cblx0XHRcdFx0XHRjbGFzc05hbWU9XCJhdS1tYWluLW5hdl9fdG9nZ2xlIGF1LW1haW4tbmF2X190b2dnbGUtLW9wZW5cIj5cblx0XHRcdFx0XHRNZW51XG5cdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHQ8ZGl2XG5cdFx0XHRcdFx0Y2xhc3NOYW1lPVwiYXUtbWFpbi1uYXZfX21lbnVcIlxuXHRcdFx0XHRcdHJlZj17IG1haW5OYXZNZW51ID0+IHsgdGhpcy5tYWluTmF2TWVudSA9IG1haW5OYXZNZW51IH19XG5cdFx0XHRcdFx0PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiYXUtbWFpbi1uYXZfX21lbnUtaW5uZXJcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiYXUtbWFpbi1uYXZfX2ZvY3VzLXRyYXAtdG9wXCI+PC9kaXY+XG5cdFx0XHRcdFx0XHQ8YnV0dG9uXG5cdFx0XHRcdFx0XHRcdGFyaWEtY29udHJvbHM9eyB0aGlzLmlkIH1cblx0XHRcdFx0XHRcdFx0b25DbGljaz17ICggZXZlbnQgKSA9PiB0aGlzLnRvZ2dsZSggZXZlbnQgKSB9XG5cdFx0XHRcdFx0XHRcdGNsYXNzTmFtZT1cImF1LW1haW4tbmF2X190b2dnbGUgYXUtbWFpbi1uYXZfX3RvZ2dsZS0tY2xvc2VcIj5cblx0XHRcdFx0XHRcdFx0Q2xvc2Vcblx0XHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHRcdFx0PEFVbWFpbk5hdk1lbnVcblx0XHRcdFx0XHRcdFx0bGlua0NvbXBvbmVudD17IHRoaXMucHJvcHMubGlua0NvbXBvbmVudCB9XG5cdFx0XHRcdFx0XHRcdGl0ZW1zPXsgdGhpcy5wcm9wcy5pdGVtcyB9XG5cdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdFx0eyB0aGlzLnByb3BzLmNoaWxkcmVuIH1cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiYXUtbWFpbi1uYXZfX2ZvY3VzLXRyYXAtYm90dG9tXCI+PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8ZGl2XG5cdFx0XHRcdFx0YXJpYS1jb250cm9scz17IHRoaXMuaWQgfVxuXHRcdFx0XHRcdHJlZj17IG1haW5OYXZPdmVybGF5ID0+IHsgdGhpcy5tYWluTmF2T3ZlcmxheSA9IG1haW5OYXZPdmVybGF5IH19XG5cdFx0XHRcdFx0b25DbGljaz17ICggZXZlbnQgKSA9PiB0aGlzLnRvZ2dsZSggZXZlbnQgKSB9XG5cdFx0XHRcdFx0Y2xhc3NOYW1lPVwiYXUtbWFpbi1uYXZfX292ZXJsYXlcIj48L2Rpdj5cblx0XHRcdDwvZGl2PlxuXHRcdCk7XG5cdH1cbn07XG5cbkFVbWFpbk5hdkNvbnRlbnQucHJvcFR5cGVzID0ge1xuXHRkYXJrOiBQcm9wVHlwZXMuYm9vbCxcblx0YWx0OiBQcm9wVHlwZXMuYm9vbCxcblx0Y2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuXHRzcGVlZDogUHJvcFR5cGVzLm51bWJlcixcblx0b25PcGVuOiBQcm9wVHlwZXMuZnVuYyxcblx0YWZ0ZXJPcGVuOiBQcm9wVHlwZXMuZnVuYyxcblx0b25DbG9zZTogUHJvcFR5cGVzLmZ1bmMsXG5cdGFmdGVyQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuXHRjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG59O1xuXG5cbmNvbnN0IEFVbWFpbk5hdiA9ICh7IGRhcmssIGFsdCwgY2xhc3NOYW1lLCBhcmlhTGFiZWwsIGNoaWxkcmVuLCAuLi5hdHRyaWJ1dGVPcHRpb25zIH0pID0+IChcblx0PG5hdlxuXHRcdGNsYXNzTmFtZT17XG5cdFx0XHQnYXUtbWFpbi1uYXYgJyArXG5cdFx0XHRgJHsgZGFyayA/ICcgYXUtbWFpbi1uYXYtLWRhcmsnIDogJycgfWAgK1xuXHRcdFx0YCR7IGFsdCA/ICcgYXUtbWFpbi1uYXYtLWFsdCcgOiAnJyB9YCArXG5cdFx0XHRgJHsgY2xhc3NOYW1lID8gJyAnICsgY2xhc3NOYW1lIDogJycgfWBcblx0XHR9XG5cdFx0YXJpYS1sYWJlbCA9IHsgYXJpYUxhYmVsIH1cblx0XHR7IC4uLmF0dHJpYnV0ZU9wdGlvbnMgfVxuXHQ+XG5cdFx0eyBjaGlsZHJlbiB9XG5cdDwvbmF2PlxuKTtcblxuQVVtYWluTmF2LnByb3BUeXBlcyA9IHtcblx0ZGFyazogUHJvcFR5cGVzLmJvb2wsXG5cdGFsdDogUHJvcFR5cGVzLmJvb2wsXG5cdGFyaWFMYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcblx0Y2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQsXG59O1xuXG5BVW1haW5OYXYuZGVmYXVsdFByb3BzID0ge1xuXHRhcmlhTGFiZWw6ICdtYWluIG5hdmlnYXRpb24nLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgQVVtYWluTmF2O1xuIl19